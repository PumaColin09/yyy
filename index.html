<!DOCTYPE html>
<html>
  <body>
    <video autoplay muted id="vid" width="640" height="480"></video>
    <script>
      navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
        const video = document.getElementById('vid');
        video.srcObject = stream;

        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');

        setInterval(() => {
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          context.drawImage(video, 0, 0, canvas.width, canvas.height);

          canvas.toBlob(blob => {
            fetch('http://192.168.178.180:5000/upload', {
              method: 'POST',
              body: blob
            });
          }, 'image/jpeg');
        }, 2000);
      }).catch(err => {
        alert("Zugriff verweigert: " + err);
      });
    </script>
  </body>
</html>
